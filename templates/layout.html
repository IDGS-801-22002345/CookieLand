<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/output.css') }}"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <nav
      class="fixed top-0 left-0 right-0 bg-white shadow-md z-30 md:left-64 transition-all duration-300"
    >
      <div class="flex flex-col p-4">
        <div class="flex justify-end space-x-4">
          <div class="flex items-center space-x-2">
            <i class="fa fa-user" aria-hidden="true"></i>
            <span class="text-gray-700 hidden md:inline">
              {{ current_user.nombre }}
            </span>
          </div>
        </div>
      </div>
    </nav>

    <!-- Barra lateral -->
    <div
      id="sidebar"
      class="bg-white h-screen w-64 fixed -left-64 md:left-0 top-0 border-r z-20 transition-all duration-300"
    >
      <!-- Contenedor del logo -->
      <div class="flex justify-center items-center p-4">
        <img
          src="{{ url_for('static', filename='img/logo.png') }}"
          alt="Logo de la empresa"
          class="w-19 h-auto"
        />
      </div>

      <!-- Items del menú -->
      <div class="p-2 space-y-2 overflow-y-auto">
        <!-- Inicio -->
        <button
          class="w-full px-3 py-3 flex items-center space-x-4 justify-start text-gray-500 hover:bg-blue-200 hover:text-blue-600 rounded-lg group transition-colors"
        >
          <i class="fas fa-home text-lg"></i>
          <span class="font-medium">Inicio</span>
        </button>

        <!-- Dashboard -->
        <button
          class="w-full px-3 py-3 flex items-center space-x-4 justify-start text-gray-500 hover:bg-blue-200 hover:text-blue-600 rounded-lg group transition-colors"
        >
          <i class="fas fa-tachometer-alt"></i>
          <span class="font-medium">Dashboard</span>
        </button>

        <!-- Usuarios -->
        <a
          href="{{ url_for('personal_bp.usuarios') }}"
          class="w-full px-3 py-3 flex items-center space-x-4 justify-start text-gray-500 hover:bg-blue-200 hover:text-blue-600 rounded-lg group transition-colors"
        >
          <i class="fas fa-users"></i>
          <span class="font-medium">Usuarios</span>
        </a>

        <!-- Proveedores -->
        <a
          href="{{ url_for('provedor_bp.index') }}"
          class="w-full px-3 py-3 flex items-center space-x-4 justify-start text-gray-500 hover:bg-blue-200 hover:text-blue-600 rounded-lg group transition-colors"
        >
          <i class="fas fa-truck"></i>
          <span class="font-medium">Proveedores</span>
        </a>

        <!-- Ventas -->
        <button
          class="w-full px-3 py-3 flex items-center space-x-4 justify-start text-gray-500 hover:bg-blue-200 hover:text-blue-600 rounded-lg group transition-colors"
        >
          <i class="fas fa-shopping-cart"></i>
          <span class="font-medium">Ventas</span>
        </button>

        <!-- Compras -->
        <button
          class="w-full px-3 py-3 flex items-center space-x-4 justify-start text-gray-500 hover:bg-blue-200 hover:text-blue-600 rounded-lg group transition-colors"
        >
          <i class="fas fa-shopping-bag"></i>
          <span class="font-medium">Compras</span>
        </button>

        <!-- Recetas -->
        <button
          class="w-full px-3 py-3 flex items-center space-x-4 justify-start text-gray-500 hover:bg-blue-200 hover:text-blue-600 rounded-lg group transition-colors"
        >
          <i class="fas fa-utensils"></i>
          <span class="font-medium">Recetas</span>
        </button>

        <!-- Inventario Insumos -->
        <button
          class="w-full px-3 py-3 flex items-center space-x-4 justify-start text-gray-500 hover:bg-blue-200 hover:text-blue-600 rounded-lg group transition-colors"
        >
          <i class="fas fa-boxes"></i>
          <span class="font-medium">Inventario Insumos</span>
        </button>

        <!-- Inventario Producción -->
        <button
          class="w-full px-3 py-3 flex items-center space-x-4 justify-start text-gray-500 hover:bg-blue-200 hover:text-blue-600 rounded-lg group transition-colors"
        >
          <i class="fas fa-industry"></i>
          <span class="font-medium">Inventario Producción</span>
        </button>
      </div>

      <!-- Botón que activa el modal -->
      <div class="absolute bottom-0 w-full p-4 border-t">
        <button
          onclick="document.getElementById('modal-logout').classList.remove('hidden')"
          class="w-full px-3 py-3 flex items-center space-x-4 justify-start text-gray-500 hover:bg-red-200 hover:text-red-600 rounded-lg group transition-colors"
        >
          <i class="fas fa-sign-out-alt"></i>
          <span class="font-medium">Cerrar sesión</span>
        </button>
      </div>
    </div>


    <!-- Modal de Cerrar Sesión -->
    <div
      id="modal-logout"
      class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60"
    >
      <div
        class="bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 animate-fade-in relative"
      >
        <div class="flex justify-center mb-4">
          <div class="bg-red-100 text-red-600 rounded-full p-4 shadow-md">
            <i class="fas fa-sign-out-alt text-2xl"></i>
          </div>
        </div>

        <h2 class="text-2xl font-bold text-gray-800 text-center mb-2">
          ¿Cerrar sesión?
        </h2>
        <p class="text-gray-600 text-sm text-center mb-6">
          Confirma si deseas cerrar tu sesión actual.
        </p>

        <div class="flex justify-center gap-4">
          <button
            type="button"
            onclick="cerrarLogoutModal()"
            class="px-5 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition font-medium"
          >
            Cancelar
          </button>
          <a
            href="{{ url_for('auth_bp.logout') }}"
            class="px-5 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition font-medium shadow-sm"
          >
            Cerrar sesión
          </a>
        </div>
        <button
          type="button"
          onclick="cerrarLogoutModal()"
          class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 text-2xl"
        >
          &times;
        </button>
      </div>
    </div>
    
    <script>
      function cerrarLogoutModal() {
        document.getElementById('modal-logout').classList.add('hidden');
      }
    </script>
    
    <!-- Contenido principal -->
    <main class="pt-20 md:ml-64 min-h-screen">
      {% block content %} {% endblock %}
    </main>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>
    <script>
      // Eliminar las notificaciones después de 5 segundos (5000ms)
      setTimeout(function () {
        const notifications = document.querySelectorAll(".notification");
        notifications.forEach((notification) => {
          notification.remove();
        });
      }, 5000);
    </script>
  </body>
</html>
